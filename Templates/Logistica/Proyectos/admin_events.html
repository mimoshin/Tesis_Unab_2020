{% extends 'base_admin.html' %}
{% load static %}

{% block page-heading-content %}
  <div class="d-sm-flex align-items-center mb-0 "><!-- d-sm-flex (responsive) -->
    <h1>Eventos (Admin)</h1>
  </div>

  <table class="table table-striped table-responsive">
    <thead >
      <tr>
        <th> ID</th>
        <th> Institucion</th>
        <th> Solicitud</th>
        <th> Fecha de solicitud</th>
        <th> Tipo</th>
        <th> Estado </th>        
        <th><button class="btn btn-sm btn-success" id="nuevo">nuevo evento</button></th>
        <th><button class="btn btn-sm btn-success" id="otro">Probando funcion</button></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% if kwargs %}
        {% for x in kwargs %}
        <tr>
          <th> {{x.pk}}</th>
          <th> {{x.petitioner.corp}}</th>
          <th> {{x.event_title}}</th>
          <th> {{x.time_create}}</th>
          <th> {{x.event_type}}</th>
          <th> {{x.status}}</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th>
            {% if x.get_type == 'event' %}
              <a class="btn btn-sm btn-success " href="{% url 'review_request' x.pk 0 %}" role="button"> Revisar </a>
            {% endif %}
            {% if x.get_type == 'info' %}
              <a class="btn btn-sm btn-success " href="{% url 'review_request' x.pk 1 %}" role="button"> Revisar </a>
            {% endif %}
          </th>
        </tr>
        {% endfor %}
      {% endif %}
    </tbody>
  </table>

  <script>

    $('#nuevo').on('click',function(){
      console.log("boton apretado");
      $.post("{% url 'events_view' %}",
            {"event_title":"torneo 1","event_type":"torneo por equipos","number_teams":"4","csrfmiddlewaretoken": "{{csrf_token}}",},
            function(response){
               console.log(response);
             });
    });
    
    $('#otro').on('click',function(){
      console.log("boton apretado");
      $.post("{% url 'events_view' %}",
            {"algo":"4","csrfmiddlewaretoken": "{{csrf_token}}",},
            function(response){
               console.log(response);
             });
    });

  </script>

{% endblock %}

{% block active-events %}
  <i class="fas fa-fw fa-circle "></i>
{% endblock %}
