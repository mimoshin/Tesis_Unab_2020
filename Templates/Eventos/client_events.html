{% extends 'base_client.html' %}
{% load static %}

{% block page-heading-content %}
  <div class="row "><!-- d-sm-flex (responsive) -->
    <div class="col-6">
      <h1>Eventos (Cliente)</h1>
    </div>
    <div class="col-4"></div>

    <div class="col-2">
      <div class="dropdown btn-group">
        <button class="btn btn-primary btn-sm dropdown-toggle" id="dp_button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Nuevo Evento
        </button>
        
        <div class="dropdown-menu" aria-labelledby="dp_button">
          <a class="dropdown-item" href="{% url 'new_event_request' %}">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
            </svg> Torneo por equipos</a>
            <a class="dropdown-item" href="{% url 'new_event_request' %}">
              <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
              </svg> Torneo individual</a>
            <a class="dropdown-item" href="{% url 'new_event_request' %}">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>Evento general</a>
        </div>
      </div>
    </div>
</div>

  <table class="table table-striped table-responsive">
    <thead >
      <tr>
        <th> ID</th>
        <th> Evento</th>
        <th> Tipo</th>  
        <th>NÂ° participantes</th>     
        <th><button class="btn btn-sm btn-success" id="team">Torneo Equipos</button></th>
        <th><button class="btn btn-sm btn-success" id="single">Torneo Solo</button></th>
        <th><button class="btn btn-sm btn-success" id="other">Otro Evento</button></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% if kwargs %}
        {% for x in kwargs %}
        <tr>
          <th> {{x.pk}}</th>
          <th> {{x.event_title}}</th>
          <th> {{x.get_type}}</th>
          {% if x.max_teams%}
          <th> {{x.max_teams}}</th>
          <th><a class="btn btn-sm btn-success " href="{% url 'review_event' 'team' x.pk %}" role="button"> Ver </a></th>
          {% elif x.max_athletes %}
          <th> {{x.max_athletes}}</th>
          <th><a class="btn btn-sm btn-success " href="{% url 'review_event' 'single' x.pk %}" role="button"> Ver </a></th>
          {% elif x.max_person%}
          <th> {{x.max_person}}</th>
          <th><a class="btn btn-sm btn-success " href="{% url 'review_event' 'other' x.pk %}" role="button"> Ver </a></th>
          {% endif %}
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
        {% endfor %}
      {% endif %}
    </tbody>
  </table>

  <script>
    $('.view').on('click',function(){
      console.log(this.value);
    });

    $('#team').on('click',function(){
      console.log("boton apretado");
      $.post("{% url 'events_view' %}",
            {"team":1,"csrfmiddlewaretoken": "{{csrf_token}}",},
            function(response){
              location.reload();
             });
    });
    
    $('#single').on('click',function(){
      console.log("boton apretado");
      $.post("{% url 'events_view' %}",
            {"single":1,"csrfmiddlewaretoken": "{{csrf_token}}",},
            function(response){
              location.reload();
             });
    });

    $('#other').on('click',function(){
      console.log("boton apretado");
      $.post("{% url 'events_view' %}",
            {"other":1,"csrfmiddlewaretoken": "{{csrf_token}}",},
            function(response){
              location.reload();
             });
    });
  </script>

{% endblock %}

{% block active-events %}
  <i class="fas fa-fw fa-circle "></i>
{% endblock %}
